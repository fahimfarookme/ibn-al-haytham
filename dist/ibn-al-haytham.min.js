if("undefined"==typeof HAYTHAM||!HAYTHAM)var HAYTHAM={};!function($,haytham){"user strict";var api=function(element,options){this.$element=$(element),this.options=$.extend(!0,{},haytham.defaults,options),this.template=new haytham.template(this.options)};api.prototype={constructor:api,generate:function(year,month){return this.template.generate(year,month)}},haytham.api=api}(jQuery,HAYTHAM||{}),function($,haytham){"user strict";var now=new Date;haytham.defaults={month:{start:now.getMonth(),"long":["January","February","March","April","May","June","July","August","September","October","November","December"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],display:"long"},week:{start:1,"long":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],display:"short"},year:now.getFullYear(),events:{clickDate:{name:"click.haytham",selector:".day",handler:null}},data:{}}}(jQuery,HAYTHAM||{}),function($,haytham){"user strict";var util=function(data,options){this.options=options,this.data=data?data:{}};util.prototype={constructor:util,year:function(){return this.data.year},month:function(){return this.data.month},monthName:function(){return this.options.month["long"][this.data.month]},monthNameShort:function(){return this.options.month["short"][this.data.month]},dayOfMonth:function(){return this.data.dayOfMonth},dayOfWeek:function(){return this.data.dayOfWeek},dayName:function(){var index=this.data.dayOfWeek+this.options.week.start;return index=index>6?index-7:index,this.options.week["long"][index]},dayNameShort:function(){var index=this.data.dayOfWeek+this.options.week.start;return index=index>6?index-7:index,this.options.week["short"][index]}};var event=function(options){this.options=options,this.events=options.events};event.prototype={constructor:event,bind:function(template){for(var key in this.events){var event=this.events[key];template.on(event.name,event.selector,this._handler(event.handler,this.options))}return template},unbind:function(template){for(var key in this.events){var event=this.events[key];template.off(event.name)}return template},_handler:function(handler,options){return function(event){event.stopPropagation();var data=new util($(this).data(),options);return"function"==typeof handler?handler(data):data}}},haytham.event=event}(jQuery,HAYTHAM||{}),function($,haytham){"user strict";var MAX_WEEKS_PER_MONTH=6,MAX_DAYS_PER_WEEK=7,numWeeks=function(body){return body.find(".week").size()},template=function(options){this.options=options,this.$weekHeader=$("<div class='week-header'>").append(this._generateWeekHeader()),this.event=new haytham.event(options)};template.prototype={constructor:template,generate:function(year,month){var head=this._generateHead(year,month),body=this._generateBody(year,month),cal=$("<div class='iah-datepicker iah-weeks-"+numWeeks(body)+"'>").append(head,body);return this.event.bind(cal)},_generateWeekHeader:function(){for(var html="",i=0;7>i;i++){var index=i+this.options.week.start;index=index>6?index-7:index,html+="<div>",html+=this.options.week[this.options.week.display][index],html+="</div>"}return html},_generateHead:function(year,month){return $("<div class='head'>").append($("<div class='month'>"+this.options.month[this.options.month.display][month]+"</div>"),$("<div class='year'>"+year+"</div>"))},_generateBody:function(year,month){var diff=new Date(year,month,1).getDay()-this.options.week.start,firstDayOfFirstWeek=0>diff?diff+MAX_DAYS_PER_WEEK:diff,data={year:year,month:month,week:1,dayOfMonth:1,lastDayOfMonth:new Date(year,month+1,0).getDate(),firstDayOfFirstWeek:firstDayOfFirstWeek};return $("<div class='body'>").append(this.$weekHeader,this._generateWeeks(data.week,data))},_generateWeeks:function(week,data){if(!(week>MAX_WEEKS_PER_MONTH||data.dayOfMonth>data.lastDayOfMonth)){var $curr=$("<div class='week'>").append(this._generateDaysOfWeek(0,data));return++data.week,$curr.after(this._generateWeeks(data.week,data))}},_generateDaysOfWeek:function(dayOfWeek,data){if(!(dayOfWeek>=MAX_DAYS_PER_WEEK)){var $curr=$("<div class='day'>");if(data.dayOfMonth<=data.lastDayOfMonth&&(data.week>1||dayOfWeek>=data.firstDayOfFirstWeek)){var dayStr=data.year+"-"+(data.month<10?"0"+data.month:data.month)+"-"+(data.dayOfMonth<10?"0"+data.dayOfMonth:data.dayOfMonth);$curr.append(data.dayOfMonth),$curr.data("dayOfWeek",dayOfWeek),$curr.data("dayOfMonth",data.dayOfMonth),$curr.data("month",data.month),$curr.data("year",data.year),$curr.data("data",this.options.data[dayStr]),++data.dayOfMonth}return $curr.after(this._generateDaysOfWeek(++dayOfWeek,data))}}},haytham.template=template}(jQuery,HAYTHAM||{}),function($,api){"user strict";var NAMESPACE="haytham";$.fn.haytham=function(options){var result=[];return this.each(function(){var mod=$(this).data(NAMESPACE);mod||$(this).data(NAMESPACE,mod=new api(this,options)),result.push(mod)}),result.length>1?result:result[0]}}(jQuery,HAYTHAM.api);